# 相似性搜索原理

给定 d 维空间中的向量集合 $\\{ x_1,..., x_n \\}$，Faiss 在内存中构建数据结构（即索引）。构建完成后，当输入新的 d 维向量 x 时，系统将高效执行以下运算：

$$
i = \mathrm{argmin}_i \lVert x - x_i \rVert
$$

其中 $\lVert.\rVert$ 表示欧氏距离（L2 范数）。

在 Faiss 术语中：
- 该数据结构称为 _索引（index）_，具有添加向量的 _add_ 方法
- 所有向量 $x_i$ 的维度必须一致
- 执行 argmin 运算即为索引的 _search_ 操作

核心功能扩展：
- 支持返回前 k 个最近邻（k-NN）
- 批量处理多个查询向量，显著提升吞吐量
- 支持精度与速度的权衡（如接受 10% 错误率以换取 10 倍速度提升）
- 支持最大内积搜索 $\mathrm{argmax}_i\langle x, x_i \rangle$
- 有限支持其他距离度量（L1、Linf 等）
- 范围搜索（返回半径内的所有近邻）
- 磁盘存储索引
- 二进制向量索引
- 向量 ID 谓词过滤
